"use strict";(()=>{var j=[["Backspace","Backspace"],["Tab","Tab"],["Enter","Enter"],["Shift","ShiftLeft"],["Shift","ShiftRight"],["Control","ControlLeft"],["Control","ControlRight"],["Alt","AltLeft"],["Alt","AltRight"],["CapsLock","CapsLock"],["Escape","Escape"],[" ","Space"],["Delete","Delete"],["0","Digit0"],["1","Digit1"],["2","Digit2"],["3","Digit3"],["4","Digit4"],["5","Digit5"],["6","Digit6"],["7","Digit7"],["8","Digit8"],["9","Digit9"],["a","KeyA"],["b","KeyB"],["c","KeyC"],["\xE7","KeyC"],["d","KeyD"],["e","KeyE"],["f","KeyF"],["g","KeyG"],["h","KeyH"],["i","KeyI"],["j","KeyJ"],["k","KeyK"],["l","KeyL"],["m","KeyM"],["n","KeyN"],["o","KeyO"],["p","KeyP"],["q","KeyQ"],["r","KeyR"],["s","KeyS"],["t","KeyT"],["u","KeyU"],["v","KeyV"],["w","KeyW"],["x","KeyX"],["y","KeyY"],["z","KeyZ"],["0","Numpad0"],["1","Numpad1"],["2","Numpad2"],["3","Numpad3"],["4","Numpad4"],["5","Numpad5"],["6","Numpad6"],["7","Numpad7"],["8","Numpad8"],["9","Numpad9"],["*","NumpadMultiply"],["+","NumpadAdd"],["-","NumpadSubtract"],[".","NumpadDecimal"],["/","NumpadDivide"],["F1","F1"],["F2","F2"],["F3","F3"],["F4","F4"],["F5","F5"],["F6","F6"],["F7","F7"],["F8","F8"],["F9","F9"],["F10","F10"],["F11","F11"],["F12","F12"],[";","Semicolon"],["=","Equal"],[",","Comma"],["-","Minus"],[".","Period"],["/","Slash"],["\\","Backslash"],["|","Bar"],["`","Backquote"],["[","BracketLeft"],["]","BracketRight"],["{","BraceLeft"],["}","BraceRight"],[">","ArrowRight"],["<","ArrowLeft"],["(","ParenthesisLeft"],[")","ParenthesisRight"],["'","Quote"],['"',"DoubleQuote"],["?","Question"],[":","Colon"],["!","Exclamation"],["~","Tilde"],["&","Ampersand"],["$","Dollar"],["%","Percent"],["^","Caret"],["#","Hash"],["@","At"],["_","Underscore"]],g="ABC",m="?123",f="1234",E="=/<",v=t=>j.find(a=>a[1]===t)||[t,t],N=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["Shift","z","x","c","v","b","n","m","Backspace"],[m,","," ",".","Enter"]].map(t=>t.map(v)),P=[["1","2","3","4","5","6","7","8","9","0"],["@","#","$","_","&","-","+","(",")","/"],[E,"*",'"',"'",":",";","!","?","Backspace"],[g,f,","," ",".","Enter"]].map(t=>t.map(v)),_=[["1","2","3",g],["4","5","6",E],["7","8","9","Backspace"],[".","0",",","Enter"]].map(t=>t.map(v)),A=[["~","`","|","\u2022","\u221A","\u03C0","\xF7","\xD7","\xA7","\u2206"],["\xA3","\xA2","\u20AC","\xA5","^","\xB0","=","{","}","\\"],[m,"%","\xA9","\xAE","\u2122","\u2713","[","]","Backspace"],[g,f,"<"," ",">","Enter"]].map(t=>t.map(v));var u="tecladojs-keyboard",O=["text","date","datetime-local","email","month","number","password","search","tel","text","time","url","week"],I={alphabet:N,numeric:P,numpad:_,symbol:A},p,h=new Map,S=!1,b=!1,s,k="",x="alphabet";function U(t={}){var a;s||(typeof t.preset=="object"&&(I.alphabet=t.preset.map(n=>n.map(y=>y==="Numeric"?m:y)).map(n=>n.map(v))),s=t);let r=document.getElementById(u);r&&((a=r.parentNode)===null||a===void 0||a.removeChild(r));let o=document.createElement("div");return o.id=u,o.style.position="fixed",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.style.display="none",o.style.zIndex="9999",o.style.width="100%",o.style.userSelect="none",s.theme==="dark"?(o.style.background="#333",o.style.color="#fff",o.style.border="1px solid #666"):(o.style.background="#fff",o.style.color="#000",o.style.border="1px solid #ccc"),o.appendChild(B()),document.body.appendChild(o),document.removeEventListener("click",Y),document.addEventListener("click",Y),document.removeEventListener("keydown",R),document.addEventListener("keydown",R),{showKeyboard:T,hideKeyboard:w,setKeyboardType:H,on(n,y){let d=document.getElementById(n);if(!n||!y||!y.onChange)throw new Error("Element Id and changeCallback are required");if(!d||!O.includes(d.type))throw new Error("Element not found or not supported, check if Id and type is correct");let l=s.withHeader?C=>{let e=document.getElementById(`${u}-header`);e&&(k=C||"",e.innerText=k),y.onChange(C)}:y.onChange;h.set(n,Object.assign(Object.assign({},y),{onChange:l}));let i=()=>{p!==d.id&&(p=d.id,T())};return d.removeEventListener("focus",i),d.addEventListener("focus",i),()=>{d.removeEventListener("focus",i),h.delete(n)}}}}function T(){var t;let a=document.getElementById(u);a&&(x=((t=h.get(p))===null||t===void 0?void 0:t.keyboardType)||"alphabet",a.appendChild(B()),a.style.display="block",a.style.transform="translateY(0)")}function w(){let t=document.getElementById(u);t&&(t.style.transform="translateY(100%)",setTimeout(()=>{t.style.display="none"},300)),p="",k="",b=!1,x="alphabet"}function H(t){if(t in I){x=t;return}throw new Error("Invalid keyboard type")}function Y(t){let a=document.getElementById(u),r=document.getElementById(p);if(a&&r){let o=r?.contains(t.target),n=a?.contains(t.target);!o&&!n&&(r.blur(),w())}else w()}function R(t){var a,r,o,n,y;if(!S){s.disablePhisicalKeyboard&&t.preventDefault();return}let d=document.getElementById(p);if(d)switch(t.key){case"Backspace":(a=h.get(p))===null||a===void 0||a.onChange(d.value.slice(0,-1));break;case"Delete":(r=h.get(p))===null||r===void 0||r.onChange("");break;case"Enter":(n=(o=h.get(p))===null||o===void 0?void 0:o.onSubmit)===null||n===void 0||n.call(o);case"Escape":d.blur(),w();break;case"Shift":b=!b;let l=document.getElementById(u);l&&l.appendChild(B());break;default:let i=b?t.key.toUpperCase():t.key;(y=h.get(p))===null||y===void 0||y.onChange(d.value+i);break}S=!1}function B(){var t,a;let r=`${u}-content`,o=document.getElementById(r);o&&((t=o?.parentElement)===null||t===void 0||t.removeChild(o));let n=document.createElement("div");if(n.id=r,n.style.display="flex",n.style.flexDirection="column",n.style.justifyContent="center",n.style.gap="10px",n.style.paddingTop="10px",n.style.paddingBottom="10px",n.style.width="100%",s?.contentClass&&(n.className=s.contentClass),s?.withHeader){let d=document.getElementById(p);d&&(k=d.value||"");let l=document.createElement("div");l.id=`${u}-header`,l.style.display="flex",l.style.paddingLeft="10px",l.style.paddingRight="10px",l.style.justifyContent="center",l.style.alignItems="center",l.style.fontSize="1rem",l.style.height="1.5rem",l.innerText=k,s.theme==="dark"?l.style.color="#fff":l.style.color="#000",n.appendChild(l)}let y=I[x];for(let d of y){let l=document.createElement("div");l.style.display="flex",l.style.gap="6px",l.style.justifyContent="center",l.style.paddingLeft="10px",l.style.paddingRight="10px";for(let[i,D]of d){let C=`${u}-button-${i}`,e=document.createElement("button");e.id=C,e.style.width="4rem",e.style.height="3rem",e.style.fontSize="1.5rem",e.style.color="white",e.style.backgroundColor="black",e.style.borderRadius="5px",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.cursor="pointer",s.theme==="dark"?(e.style.background="#333",e.style.color="#fff",e.style.border="1px solid #666",e.style.boxShadow="0 2px 4px rgba(255, 255, 255, 0.2)",e.style.transition="box-shadow 0.3s ease",e.addEventListener("mousedown",()=>{e.style.boxShadow="0 4px 8px rgba(255, 255, 255, 0.4)"}),e.addEventListener("mouseup",()=>{e.style.boxShadow="0 2px 4px rgba(255, 255, 255, 0.2)"})):(e.style.background="#fff",e.style.color="#000",e.style.border="1px solid #ccc",e.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.2)",e.style.transition="box-shadow 0.3s ease",e.addEventListener("mousedown",()=>{e.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.4)"}),e.addEventListener("mouseup",()=>{e.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.2)"}));let K=i===f?i.slice(0,2)+"</br>"+i.slice(2,4):i;if(s?.keySymbols&&["Backspace","Enter","Shift"].includes(i)&&(K=s.keySymbols[i]||i),b&&(K=K.toUpperCase()),e.innerHTML=K,(i==="Backspace"||i==="Enter"||i==="Shift"||[g,m,E,f].includes(i))&&(e.style.width="6rem",!((a=s?.keySymbols)===null||a===void 0)&&a[i]||(e.style.fontSize="1rem")),i===" "&&(e.style.width="14rem"),i==="Shift")if(b){e.style.position="relative";let c=document.createElement("div");c.id="dot-indicator",c.style.width="0.5rem",c.style.height="0.5rem",c.style.borderRadius="50%",c.style.backgroundColor=s.theme==="dark"?"#fff":"#000",c.style.position="absolute",c.style.top="0.25rem",c.style.right="0.25rem",e.appendChild(c)}else{let c=e.querySelector("#dot-indicator");c&&e.removeChild(c)}s?.keyClass&&(e.className=s.keyClass),e.addEventListener("click",c=>{if([m,f,E,g].includes(i)){x=i===m?"numeric":i===f?"numpad":i===E?"symbol":"alphabet";let F=document.getElementById(u);F&&F.appendChild(B()),c.stopPropagation();return}let L=document.getElementById(p);L?.focus();let M=new KeyboardEvent("keydown",{key:i,code:D,shiftKey:b});S=!0,document.dispatchEvent(M),c.stopPropagation()}),l.appendChild(e)}n.appendChild(l)}return n}})();
