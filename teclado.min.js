var W=[["Backspace","Backspace"],["Tab","Tab"],["Enter","Enter"],["Shift","ShiftLeft"],["Shift","ShiftRight"],["Control","ControlLeft"],["Control","ControlRight"],["Alt","AltLeft"],["Alt","AltRight"],["CapsLock","CapsLock"],["Escape","Escape"],[" ","Space"],["Delete","Delete"],["0","Digit0"],["1","Digit1"],["2","Digit2"],["3","Digit3"],["4","Digit4"],["5","Digit5"],["6","Digit6"],["7","Digit7"],["8","Digit8"],["9","Digit9"],["a","KeyA"],["b","KeyB"],["c","KeyC"],["\xE7","KeyC"],["d","KeyD"],["e","KeyE"],["f","KeyF"],["g","KeyG"],["h","KeyH"],["i","KeyI"],["j","KeyJ"],["k","KeyK"],["l","KeyL"],["m","KeyM"],["n","KeyN"],["o","KeyO"],["p","KeyP"],["q","KeyQ"],["r","KeyR"],["s","KeyS"],["t","KeyT"],["u","KeyU"],["v","KeyV"],["w","KeyW"],["x","KeyX"],["y","KeyY"],["z","KeyZ"],["0","Numpad0"],["1","Numpad1"],["2","Numpad2"],["3","Numpad3"],["4","Numpad4"],["5","Numpad5"],["6","Numpad6"],["7","Numpad7"],["8","Numpad8"],["9","Numpad9"],["*","NumpadMultiply"],["+","NumpadAdd"],["-","NumpadSubtract"],[".","NumpadDecimal"],["/","NumpadDivide"],["F1","F1"],["F2","F2"],["F3","F3"],["F4","F4"],["F5","F5"],["F6","F6"],["F7","F7"],["F8","F8"],["F9","F9"],["F10","F10"],["F11","F11"],["F12","F12"],[";","Semicolon"],["=","Equal"],[",","Comma"],["-","Minus"],[".","Period"],["/","Slash"],["\\","Backslash"],["|","Bar"],["`","Backquote"],["[","BracketLeft"],["]","BracketRight"],["{","BraceLeft"],["}","BraceRight"],[">","ArrowRight"],["<","ArrowLeft"],["(","ParenthesisLeft"],[")","ParenthesisRight"],["'","Quote"],['"',"DoubleQuote"],["?","Question"],[":","Colon"],["!","Exclamation"],["~","Tilde"],["&","Ampersand"],["$","Dollar"],["%","Percent"],["^","Caret"],["#","Hash"],["@","At"],["_","Underscore"]],x="ABC",g="?123",v="1234",C="=/<",K=o=>W.find(a=>a[1]===o.toLowerCase())||[o,o],j=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["Shift","z","x","c","v","b","n","m","Backspace"],[g,","," ",".","Enter"]].map(o=>o.map(K)),M=[["1","2","3","4","5","6","7","8","9","0"],["@","#","$","_","&","-","+","(",")","/"],[C,"*",'"',"'",":",";","!","?","Backspace"],[x,v,","," ",".","Enter"]].map(o=>o.map(K)),O=[["1","2","3",x],["4","5","6",C],["7","8","9","Backspace"],[".","0",",","Enter"]].map(o=>o.map(K)),U=[["~","`","|","\u2022","\u221A","\u03C0","\xF7","\xD7","\xA7","\u2206"],["\xA3","\xA2","\u20AC","\xA5","^","\xB0","=","{","}","\\"],[g,"%","\xA9","\xAE","\u2122","\u2713","[","]","Backspace"],[x,v,"<"," ",">","Enter"]].map(o=>o.map(K));var m="tecladojs-keyboard",G=["text","date","datetime-local","email","month","number","password","search","tel","text","time","url","week"],Q={default:j,numeric:M,numpad:O,symbol:U},l,E=new Map,D="default",p,F=!1,f=!1,B="",R=!1,z,k;function J(o={}){var a;l||(typeof o.preset=="object"&&(Q.default=o.preset.map(s=>s.map(r=>r==="Numeric"?g:r)).map(s=>s.map(r=>typeof r=="string"?K(r):[r[0],r[0],...r.slice(1)]))),l=o);let u=document.getElementById(m);u&&((a=u.parentNode)===null||a===void 0||a.removeChild(u));let n=document.createElement("div");return n.id=m,n.style.position="fixed",n.style.bottom="0px",n.style.left="0px",n.style.right="0px",n.style.display="none",n.style.zIndex="9999",n.style.width="100%",n.style.userSelect="none",l.theme==="dark"?(n.style.background="#333",n.style.color="#fff",n.style.border="1px solid #666"):(n.style.background="#fff",n.style.color="#000",n.style.border="1px solid #ccc"),n.appendChild(P()),document.body.appendChild(n),document.removeEventListener("click",$),document.addEventListener("click",$),document.removeEventListener("keydown",q),document.addEventListener("keydown",q),{showKeyboard:H,hideKeyboard:N,on(s,r){if(!s||!r||!r.onChange)throw new Error("Element Id and changeCallback are required");let y=document.getElementById(s);if(!y||!G.includes(y.type))throw new Error("Element not found or not supported, check if Id and type is correct");let d=l.withHeader?b=>{let L=document.getElementById(`${m}-header`);L&&(B=b||"",L.innerText=B),r.onChange(b)}:r.onChange;E.set(s,Object.assign(Object.assign({},r),{onChange:d}));let i=()=>{p!==y.id&&(p=y.id,H())};return y.removeEventListener("focus",i),y.addEventListener("focus",i),()=>{y.removeEventListener("focus",i),E.delete(s)}}}}function H(){var o;let a=document.getElementById(m);a&&(D=((o=E.get(p))===null||o===void 0?void 0:o.keyboardType)||"default",a.appendChild(P()),a.style.display="block",a.style.transform="translateY(0)")}function N(){let o=document.getElementById(m);o&&(o.style.transform="translateY(100%)",setTimeout(()=>{o.style.display="none"},300)),p="",B="",f=!1,D="default",k=void 0}function $(o){let a=document.getElementById(m),u=document.getElementById(p);if(a&&u){let n=u?.contains(o.target),s=a?.contains(o.target);!n&&!s&&(u.blur(),N())}else N()}function q(o){var a,u,n,s,r;if(!F){l.disablePhisicalKeyboard&&o.preventDefault();return}let y=document.getElementById(p);if(y)switch(o.key){case"Backspace":(a=E.get(p))===null||a===void 0||a.onChange(y.value.slice(0,-1));break;case"Delete":(u=E.get(p))===null||u===void 0||u.onChange("");break;case"Enter":(s=(n=E.get(p))===null||n===void 0?void 0:n.onSubmit)===null||s===void 0||s.call(n);case"Escape":y.blur(),N();break;case"Shift":f=!f;let d=document.getElementById(m);d&&d.appendChild(P());break;default:let i=f?o.key.toUpperCase():o.key;(r=E.get(p))===null||r===void 0||r.onChange(y.value+i);break}F=!1}function P(){var o,a;let u=`${m}-content`,n=document.getElementById(u);n&&((o=n?.parentElement)===null||o===void 0||o.removeChild(n));let s=document.createElement("div");if(s.id=u,s.style.display="flex",s.style.flexDirection="column",s.style.justifyContent="center",s.style.gap="10px",s.style.paddingTop="10px",s.style.paddingBottom="10px",s.style.width="100%",l?.contentClass&&(s.className=l.contentClass),l?.withHeader){let y=document.getElementById(p);y&&(B=y.value||"");let d=document.createElement("div");d.id=`${m}-header`,d.style.display="flex",d.style.paddingLeft="10px",d.style.paddingRight="10px",d.style.justifyContent="center",d.style.alignItems="center",d.style.fontSize="1rem",d.style.height="1.5rem",d.innerText=B,l.theme==="dark"?d.style.color="#fff":d.style.color="#000",s.appendChild(d)}let r=Q[D];for(let y of r){let d=document.createElement("div");d.style.display="flex",d.style.gap="6px",d.style.justifyContent="center",d.style.paddingLeft="10px",d.style.paddingRight="10px";for(let[i,Y,...b]of y){let L=`${m}-button-${i}`,e=document.createElement("button");e.id=L,e.style.width="4rem",e.style.height="3rem",e.style.fontSize="1.5rem",e.style.color="white",e.style.backgroundColor="black",e.style.borderRadius="5px",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.cursor="pointer";let w,_;l.theme==="dark"?(w="0 2px 4px rgba(255, 255, 255, 0.2)",_="0 4px 8px rgba(255, 255, 255, 0.4)",e.style.background="#333",e.style.color="#fff",e.style.border="1px solid #666",e.style.boxShadow=w,e.style.transition="box-shadow 0.3s ease"):(w="0 2px 4px rgba(0, 0, 0, 0.2)",_="0 4px 8px rgba(0, 0, 0, 0.4)",e.style.background="#fff",e.style.color="#000",e.style.border="1px solid #ccc",e.style.boxShadow=w,e.style.transition="box-shadow 0.3s ease"),e.addEventListener("mousedown",()=>{e.style.boxShadow=_,b?.length&&(z=setTimeout(()=>{R=!0,k=[...b];let t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.zIndex="9999",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.flexWrap="wrap",t.style.gap="10px",l.theme==="dark"?t.style.backgroundColor="rgba(51, 51, 51, 0.8)":t.style.backgroundColor="rgba(255, 255, 255, 0.8)";for(let h of k){let c=document.createElement("button");c.innerText=f?h.toUpperCase():h,c.style.width="3rem",c.style.height="3rem",c.style.fontSize="1.5rem",c.style.borderRadius="5px",c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="center",c.style.cursor="pointer",l.theme==="dark"?(c.style.background="#333",c.style.color="#fff",c.style.border="1px solid #666"):(c.style.background="#fff",c.style.color="#000",c.style.border="1px solid #ccc"),c.addEventListener("click",I=>{var A;let T=document.getElementById(p);T?.focus();let V=new KeyboardEvent("keydown",{key:h,code:h,shiftKey:f});F=!0,k=void 0,document.dispatchEvent(V),I.stopPropagation(),(A=t.parentElement)===null||A===void 0||A.removeChild(t)}),t.appendChild(c)}e.appendChild(t)},500))}),e.addEventListener("mouseup",t=>{e.style.boxShadow=w,clearTimeout(z),R&&t.preventDefault(),R=!1});let S=i===v?i.slice(0,2)+"</br>"+i.slice(2,4):i;if(l?.keySymbols&&["Backspace","Enter","Shift"].includes(i)&&(S=l.keySymbols[i]||i),f&&(S=S.toUpperCase()),e.innerHTML=S,(i==="Backspace"||i==="Enter"||i==="Shift"||[x,g,C,v].includes(i))&&(e.style.width="6rem",!((a=l?.keySymbols)===null||a===void 0)&&a[i]||(e.style.fontSize="1rem")),i===" "&&(e.style.width="14rem"),i==="Shift")if(f){e.style.position="relative";let t=document.createElement("div");t.id="dot-indicator",t.style.width="0.5rem",t.style.height="0.5rem",t.style.borderRadius="50%",t.style.backgroundColor=l.theme==="dark"?"#fff":"#000",t.style.position="absolute",t.style.top="0.25rem",t.style.right="0.25rem",e.appendChild(t)}else{let t=e.querySelector("#dot-indicator");t&&e.removeChild(t)}l?.keyClass&&(e.className=l.keyClass),e.addEventListener("click",t=>{if(k?.length){t.stopPropagation();return}if([g,v,C,x].includes(i)){D=i===g?"numeric":i===v?"numpad":i===C?"symbol":"default";let I=document.getElementById(m);I&&I.appendChild(P()),t.stopPropagation();return}let h=document.getElementById(p);h?.focus();let c=new KeyboardEvent("keydown",{key:i,code:Y,shiftKey:f});F=!0,document.dispatchEvent(c),t.stopPropagation()}),d.appendChild(e)}s.appendChild(d)}return s}export{J as teclado};
